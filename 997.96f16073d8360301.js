"use strict";(self.webpackChunkkaarms_webapp=self.webpackChunkkaarms_webapp||[]).push([[997],{1997:(G,v,l)=>{l.r(v),l.d(v,{TenantsModule:()=>d});var g=l(6895),U=l(9445),C=l(9116),o=l(7155),e=l(4650),Z=l(175),b=l(8739),T=l(6308),s=l(7274),i=l(4006);class y{}var D=l(9101),u=l(9549),A=l(4144),N=l(3848),_=l(9602);function w(n,t){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Service"),e.qZA())}function M(n,t){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.service)}}function S(n,t){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Value"),e.qZA())}function q(n,t){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.value)," ")}}function J(n,t){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Issued"),e.qZA())}function I(n,t){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,a.created)," ")}}function F(n,t){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Due"),e.qZA())}function x(n,t){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,a.due))}}function k(n,t){1&n&&e._UZ(0,"tr",27)}function Y(n,t){1&n&&e._UZ(0,"tr",28)}const Q=function(){return[5,10,25,100]};class p{constructor(t,a){this.tenantService=t,this.addInvoiceDialog=a,this.displayedColumns=["service","value","created_date","due_date"],this.invoices=new o.by,this.tenantForm=new i.cw({id:new i.NI(""),name:new i.NI(""),email:new i.NI(""),phone_number:new i.NI(""),notes:new i.NI("")})}ngOnInit(){this.subscription=this.tenantService.getTenant().subscribe(t=>{this.tenantForm.patchValue(t),this.invoices=new o.by(t.invoices)})}saveTenant(){this.tenantForm.value.id||(this.tenantForm.value.id=String(Math.floor(1e4*Math.random()+1))),this.tenantService.saveTenant(this.tenantForm.value),this.tenantService.requestTenant(this.tenantForm.value.id),this.tenantService.requestTenants()}deleteTenant(){confirm("Are you sure?")&&(this.tenantService.deleteTenant(this.tenantForm.value.id),this.tenantService.requestTenants(),this.clearForm())}clearForm(){this.tenantForm.reset(),this.invoices=new o.by}ngOnDestroy(){this.subscription.unsubscribe()}openAddInvoiceDialog(){this.addInvoiceDialog.open(f,{width:"50%",data:new y}).afterClosed().subscribe(a=>{a&&(a.created=new Date,this.tenantService.addInvoice(this.tenantForm.value,a),this.tenantService.requestTenant(this.tenantForm.value.id))})}}p.\u0275fac=function(t){return new(t||p)(e.Y36(Z.J),e.Y36(s.uw))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-tenant-detail"]],decls:49,vars:11,consts:[[1,"row"],[1,"align-center"],[1,"ten","columns","offset","by-one"],["label","Overview"],[3,"formGroup"],["appearance","outline"],["matInput","","placeholder","Full Name","formControlName","name","name","name"],["matInput","","placeholder","Email","formControlName","email","name","email"],["matInput","","placeholder","Phone Number","formControlName","phone_number","name","phone_number"],["matInput","","placeholder","Notes","formControlName","notes","name","notes"],["mat-stroked-button","",1,"offset","by-three",3,"disabled","click"],["mat-stroked-button","",1,"offset","by-one",3,"click"],["mat-stroked-button","",1,"offset","by-one",3,"disabled","click"],["label","Invoices"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","created"],["matColumnDef","due"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page",3,"length","pageSize","pageSizeOptions"],["mat-stroked-button","","id","create-invoice",1,"offset","by-four",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"mat-tab-group")(5,"mat-tab",3)(6,"form",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Full Name"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Email"),e.qZA(),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Phone Number"),e.qZA(),e._UZ(18,"input",8),e.qZA(),e.TgZ(19,"mat-form-field",5)(20,"mat-label"),e._uU(21,"Notes"),e.qZA(),e.TgZ(22,"textarea",9),e._uU(23,"Notes"),e.qZA()(),e.TgZ(24,"button",10),e.NdJ("click",function(){return a.saveTenant()}),e._uU(25," Save "),e.qZA(),e.TgZ(26,"button",11),e.NdJ("click",function(){return a.clearForm()}),e._uU(27," Clear "),e.qZA(),e.TgZ(28,"button",12),e.NdJ("click",function(){return a.deleteTenant()}),e._uU(29," Delete "),e.qZA()()(),e.TgZ(30,"mat-tab",13)(31,"table",14),e.ynx(32,15),e.YNc(33,w,2,0,"th",16),e.YNc(34,M,2,1,"td",17),e.BQk(),e.ynx(35,18),e.YNc(36,S,2,0,"th",16),e.YNc(37,q,3,3,"td",17),e.BQk(),e.ynx(38,19),e.YNc(39,J,2,0,"th",16),e.YNc(40,I,3,3,"td",17),e.BQk(),e.ynx(41,20),e.YNc(42,F,2,0,"th",16),e.YNc(43,x,3,3,"td",17),e.BQk(),e.YNc(44,k,1,0,"tr",21),e.YNc(45,Y,1,0,"tr",22),e.qZA(),e._UZ(46,"mat-paginator",23),e.TgZ(47,"button",24),e.NdJ("click",function(){return a.openAddInvoiceDialog()}),e._uU(48," Create Invoice "),e.qZA()()()()()),2&t&&(e.xp6(2),e.hij(" ",a.tenantForm.value.id?a.tenantForm.value.name:"Add Tenant"," "),e.xp6(4),e.Q6J("formGroup",a.tenantForm),e.xp6(18),e.Q6J("disabled",!a.tenantForm.value.name),e.xp6(4),e.Q6J("disabled",!a.tenantForm.value.id),e.xp6(3),e.Q6J("dataSource",a.invoices),e.xp6(13),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(10,Q)))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,D.lW,o.BZ,o.fO,o.as,o.w1,o.Dz,o.nj,o.ge,o.ev,o.XQ,o.Gk,b.NW,u.KE,u.hX,A.Nt,N.uX,N.SP,T.YE,g.H9,g.uU],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]{padding-top:25px}table[_ngcontent-%COMP%]{width:100%}#create-invoice[_ngcontent-%COMP%]{margin-top:25px}"]});class f{constructor(t,a){this.dialogRef=t,this.invoice=a}onNoClick(){this.dialogRef.close()}}function O(n,t){1&n&&(e.TgZ(0,"th",13),e._uU(1,"Name"),e.qZA())}function R(n,t){if(1&n){const a=e.EpF();e.TgZ(0,"td",14)(1,"a",15),e.NdJ("click",function(){const $=e.CHM(a).$implicit,W=e.oxw();return e.KtG(W.loadTenant($.id))}),e._uU(2),e.qZA()()}if(2&n){const a=t.$implicit;e.xp6(2),e.hij(" ",a.name," ")}}function B(n,t){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Email"),e.qZA())}function z(n,t){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.email)}}function P(n,t){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Phone Number"),e.qZA())}function j(n,t){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const a=t.$implicit;e.xp6(1),e.Oqu(a.phone_number)}}function H(n,t){1&n&&e._UZ(0,"tr",17)}function E(n,t){1&n&&e._UZ(0,"tr",18)}f.\u0275fac=function(t){return new(t||f)(e.Y36(s.so),e.Y36(s.WI))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-add-invoice"]],decls:27,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline"],["matInput","","placeholder","Service","name","service",3,"ngModel","ngModelChange"],["matInput","","placeholder","Due","name","due",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["due",""],["matInput","","placeholder","Value","name","value",3,"ngModel","ngModelChange"],["matInput","","placeholder","Notes","name","notes",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"click"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(t,a){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Create Invoice"),e.qZA(),e.TgZ(2,"div",1)(3,"form")(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Service"),e.qZA(),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(c){return a.invoice.service=c}),e.qZA()(),e.TgZ(8,"mat-form-field",2)(9,"input",4),e.NdJ("ngModelChange",function(c){return a.invoice.due_date=c}),e.qZA(),e._UZ(10,"mat-datepicker-toggle",5)(11,"mat-datepicker",null,6),e.qZA(),e.TgZ(13,"mat-form-field",2)(14,"mat-label"),e._uU(15,"Value"),e.qZA(),e.TgZ(16,"input",7),e.NdJ("ngModelChange",function(c){return a.invoice.value=c}),e.qZA()(),e.TgZ(17,"mat-form-field",2)(18,"mat-label"),e._uU(19,"Notes"),e.qZA(),e.TgZ(20,"textarea",8),e.NdJ("ngModelChange",function(c){return a.invoice.additional_notes=c}),e._uU(21,"Notes"),e.qZA()()()(),e.TgZ(22,"div",9)(23,"button",10),e.NdJ("click",function(){return a.onNoClick()}),e._uU(24,"Cancel"),e.qZA(),e.TgZ(25,"button",11),e._uU(26," Create Invoice "),e.qZA()()),2&t){const m=e.MAs(12);e.xp6(7),e.Q6J("ngModel",a.invoice.service),e.xp6(2),e.Q6J("matDatepicker",m)("ngModel",a.invoice.due_date),e.xp6(1),e.Q6J("for",m),e.xp6(6),e.Q6J("ngModel",a.invoice.value),e.xp6(4),e.Q6J("ngModel",a.invoice.additional_notes),e.xp6(5),e.Q6J("mat-dialog-close",a.invoice)("disabled",!a.invoice.service)}},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.On,i.F,D.lW,u.KE,u.hX,u.R9,A.Nt,s.ZT,s.uh,s.xY,s.H8,_.Mq,_.hl,_.nW],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{text-align:center}"]});const L=function(){return[10,15,20,25,50,100]};class h{constructor(t){this.tenantService=t,this.displayedColumns=["name","email","phone_number"],this.dataSource=new o.by,this.devicesLoaded=!1}ngOnInit(){this.getTenants()}getTenants(){this.subscription=this.tenantService.getTenants().subscribe(t=>{this.dataSource=new o.by(t)}),this.tenantService.requestTenants()}loadTenant(t){this.tenantService.requestTenant(t)}ngOnDestroy(){this.subscription.unsubscribe()}}h.\u0275fac=function(t){return new(t||h)(e.Y36(Z.J))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-tenants"]],decls:17,vars:5,consts:[[1,"row"],[1,"five","columns"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","phone_number"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"seven","columns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["href","#",3,"click"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,O,2,0,"th",4),e.YNc(5,R,3,1,"td",5),e.BQk(),e.ynx(6,6),e.YNc(7,B,2,0,"th",7),e.YNc(8,z,2,1,"td",5),e.BQk(),e.ynx(9,8),e.YNc(10,P,2,0,"th",7),e.YNc(11,j,2,1,"td",5),e.BQk(),e.YNc(12,H,1,0,"tr",9),e.YNc(13,E,1,0,"tr",10),e.qZA(),e._UZ(14,"mat-paginator",11),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"app-tenant-detail"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("dataSource",a.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(4,L)))},dependencies:[o.BZ,o.fO,o.as,o.w1,o.Dz,o.nj,o.ge,o.ev,o.XQ,o.Gk,b.NW,T.YE,T.nU,p],styles:["table[_ngcontent-%COMP%]{width:100%}"]});const X=[{path:"",component:h}];class r{}r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[C.Bz.forChild(X),C.Bz]});class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[g.ez,r,U.m]})}}]);