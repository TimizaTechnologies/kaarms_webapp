"use strict";(self.webpackChunkkaarms_webapp=self.webpackChunkkaarms_webapp||[]).push([[209],{6209:(V,A,o)=>{o.r(A),o.d(A,{ReservationsModule:()=>u});var y=o(6895),h=o(9116),t=o(4650),i=o(7155),a=o(4006),R=o(7009),S=o(1072),f=o(262),Y=o(529),x=o(982);class m{constructor(e,n){this.http=e,this.eh=n,this.reservationUrl=`${S.N.apiUrl}reservations`}createReservation(e){return this.http.post(this.reservationUrl,e).pipe((0,f.K)(this.eh.handleError))}getReservation(e){return this.http.get(`${this.reservationUrl}/${e}`).pipe((0,f.K)(this.eh.handleError))}getReservations(){return this.http.get(`${this.reservationUrl}`).pipe((0,f.K)(this.eh.handleError))}updateReservation(e,n){return this.http.patch(`${this.reservationUrl}/${e}`,n).pipe((0,f.K)(this.eh.handleError))}deleteReservation(e){return this.http.delete(`${this.reservationUrl}/${e}`).pipe((0,f.K)(this.eh.handleError))}}m.\u0275fac=function(e){return new(e||m)(t.LFG(Y.eN),t.LFG(x.k))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var F=o(175),E=o(1122),c=o(3546),U=o(9101),d=o(9549),b=o(4144),N=o(4385),J=o(3238),v=o(9602);function I(r,e){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const n=e.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.name," ")}}function q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Please choose a tenant"),t.qZA())}function D(r,e){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const n=e.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.name," ")}}function L(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Please choose a property"),t.qZA())}function Q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid start date"),t.qZA())}function k(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid end date"),t.qZA())}class l{constructor(e,n,s,C,T,_,W){this.formBuilder=e,this.router=n,this.route=s,this.snackBar=C,this.reservationsService=T,this.tenantsService=_,this.propertiesService=W}ngOnInit(){this.reservationForm=this.formBuilder.group({cost:["",a.kI.required],description:["",a.kI.required],start_date:new a.NI(null),end_date:new a.NI(null),tenantControl:new a.NI(null,a.kI.required),propertyControl:new a.NI(null,a.kI.required)}),this.id=this.route.snapshot.params.id,this.id&&(this.isEdit=!0,this.reservationsService.getReservation(this.id).subscribe(e=>{this.reservationForm.patchValue(e)})),this.getTenants(),this.getProperties()}getTenants(){return this.tenantsService.getTenants$().subscribe(e=>{this.tenants=e.results})}getProperties(){return this.propertiesService.getProperties().subscribe(e=>{this.properties=e.results})}onSubmit(){this.isEdit?this.reservationsService.updateReservation(this.id,this.reservationForm.value).subscribe(e=>{this.snackBar.open("Updated Successfully","",{duration:2e3})}):this.reservationsService.createReservation(this.reservationForm.value).subscribe(e=>{this.snackBar.open("Created Successfully","",{duration:2e3})})}}l.\u0275fac=function(e){return new(e||l)(t.Y36(a.qu),t.Y36(h.F0),t.Y36(h.gz),t.Y36(R.ux),t.Y36(m),t.Y36(F.J),t.Y36(E.C))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-edit-reservation"]],decls:45,vars:16,consts:[[3,"formGroup","ngSubmit"],["appearance","fill"],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","Cost","formControlName","cost","required",""],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start_date","placeholder","Start date"],["matEndDate","","formControlName","end_date","placeholder","End date"],["matIconSuffix","",3,"for"],["picker",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","warn","type","button","routerLink","/"],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Add/Edit"),t.qZA(),t.TgZ(3,"mat-card-content")(4,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(5,"h4"),t._uU(6,"Tenant"),t.qZA(),t.TgZ(7,"mat-form-field",1)(8,"mat-label"),t._uU(9,"Tenant"),t.qZA(),t.TgZ(10,"mat-select",2),t.YNc(11,I,2,2,"mat-option",3),t.qZA(),t.YNc(12,q,2,0,"mat-error",4),t.qZA(),t.TgZ(13,"h4"),t._uU(14,"Property"),t.qZA(),t.TgZ(15,"mat-form-field",1)(16,"mat-label"),t._uU(17,"Property"),t.qZA(),t.TgZ(18,"mat-select",2),t.YNc(19,D,2,2,"mat-option",3),t.qZA(),t.YNc(20,L,2,0,"mat-error",4),t.qZA(),t.TgZ(21,"mat-form-field"),t._UZ(22,"input",5),t.qZA(),t._UZ(23,"br"),t.TgZ(24,"mat-form-field",1)(25,"mat-label"),t._uU(26,"Enter a date range (Start Date - End Date)"),t.qZA(),t.TgZ(27,"mat-date-range-input",6),t._UZ(28,"input",7)(29,"input",8),t.qZA(),t.TgZ(30,"mat-hint"),t._uU(31,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(32,"mat-datepicker-toggle",9)(33,"mat-date-range-picker",null,10),t.YNc(35,Q,2,0,"mat-error",4),t.YNc(36,k,2,0,"mat-error",4),t.qZA(),t.TgZ(37,"p"),t._uU(38),t.ALo(39,"json"),t.qZA(),t._UZ(40,"br"),t.TgZ(41,"button",11),t._uU(42," Save "),t.qZA(),t.TgZ(43,"button",12),t._uU(44," Cancel "),t.qZA()()()()),2&e){const s=t.MAs(34);t.xp6(4),t.Q6J("formGroup",n.reservationForm),t.xp6(6),t.Q6J("formControl",n.reservationForm.tenantControl),t.xp6(1),t.Q6J("ngForOf",n.tenants),t.xp6(1),t.Q6J("ngIf",n.reservationForm.tenantControl.hasError("required")),t.xp6(6),t.Q6J("formControl",n.reservationForm.propertyControl),t.xp6(1),t.Q6J("ngForOf",n.properties),t.xp6(1),t.Q6J("ngIf",n.reservationForm.propertyControl.hasError("required")),t.xp6(7),t.Q6J("formGroup",n.reservationForm)("rangePicker",s),t.xp6(5),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",n.reservationForm.controls.start_date.hasError("matStartDateInvalid")),t.xp6(1),t.Q6J("ngIf",n.reservationForm.controls.end_date.hasError("matEndDateInvalid")),t.xp6(2),t.hij("Selected range: ",t.lcZ(39,14,n.reservationForm.value),""),t.xp6(3),t.Q6J("disabled",!n.reservationForm.valid)}},dependencies:[y.sg,y.O5,h.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,c.a8,c.dn,c.n5,U.lW,d.KE,d.hX,d.bx,d.TO,d.R9,b.Nt,N.gD,J.ey,v.nW,v.wx,v.zY,v.By,v._g,y.Ts],styles:["mat-card[_ngcontent-%COMP%]{min-width:35%;padding:10px}"]});var $=o(7274),w=o(7392);function B(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Id"),t.qZA())}function O(r,e){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const n=e.$implicit;t.xp6(1),t.Oqu(n.id)}}function M(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Cost"),t.qZA())}function K(r,e){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const n=e.$implicit;t.xp6(1),t.Oqu(n.cost)}}function P(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Actions"),t.qZA())}function G(r,e){if(1&r){const n=t.EpF();t.TgZ(0,"mat-cell")(1,"button",10),t.NdJ("click",function(){const T=t.CHM(n).$implicit,_=t.oxw();return t.KtG(_.edit(T.id))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",10),t.NdJ("click",function(){const T=t.CHM(n).$implicit,_=t.oxw();return t.KtG(_.delete(T.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function j(r,e){1&r&&t._UZ(0,"mat-header-row")}function H(r,e){1&r&&t._UZ(0,"mat-row")}class g{constructor(e,n){this.myService=e,this.dialog=n,this.displayedColumns=["id","cost","actions"]}ngOnInit(){this.myService.getReservations().subscribe(e=>{this.items=e.results}),this.myService.getReservations().subscribe(e=>{this.dataSource=new i.by(e.results)})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}add(){this.dialog.open(l,{width:"250px",data:{id:0}}).afterClosed().subscribe(n=>{this.ngOnInit()})}edit(e){this.dialog.open(l,{width:"250px",data:{id:e}}).afterClosed().subscribe(s=>{this.ngOnInit()})}delete(e){this.myService.deleteReservation(e).subscribe(n=>{this.ngOnInit()})}}g.\u0275fac=function(e){return new(e||g)(t.Y36(m),t.Y36($.uw))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-list-reservations"]],decls:23,vars:3,consts:[["matInput","","placeholder","Filter",3,"keyup"],["mat-raised-button","","color","primary",3,"click"],[3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cost"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-icon-button","",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"List"),t.qZA(),t.TgZ(3,"mat-card-content")(4,"mat-form-field")(5,"input",0),t.NdJ("keyup",function(C){return n.applyFilter(C)}),t.qZA()(),t._UZ(6,"br"),t.TgZ(7,"button",1),t.NdJ("click",function(){return n.add()}),t._uU(8,"Add"),t.qZA(),t._UZ(9,"br")(10,"br"),t.TgZ(11,"mat-table",2),t.ynx(12,3),t.YNc(13,B,2,0,"mat-header-cell",4),t.YNc(14,O,2,1,"mat-cell",5),t.BQk(),t.ynx(15,6),t.YNc(16,M,2,0,"mat-header-cell",4),t.YNc(17,K,2,1,"mat-cell",5),t.BQk(),t.ynx(18,7),t.YNc(19,P,2,0,"mat-header-cell",4),t.YNc(20,G,7,0,"mat-cell",5),t.BQk(),t.YNc(21,j,1,0,"mat-header-row",8),t.YNc(22,H,1,0,"mat-row",9),t.qZA()()()),2&e&&(t.xp6(11),t.Q6J("dataSource",n.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[c.a8,c.dn,c.n5,U.lW,U.RK,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,d.KE,b.Nt,w.Hw]});class Z{}Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-reservations"]],decls:3,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h3"),t._uU(1,"Reservations"),t.qZA(),t._UZ(2,"app-list-reservations"))},dependencies:[g]});const z=[{path:"",component:Z},{path:"add",component:l},{path:"edit/:id",component:l}];class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[h.Bz.forChild(z),h.Bz]});var X=o(9445);class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[y.ez,p,X.m]})}}]);